add_library(memory_efficient_attention_layer STATIC memory_efficient_attention_layer.cc)
set_property(TARGET memory_efficient_attention_layer PROPERTY POSITION_INDEPENDENT_CODE  ON)
target_link_libraries(memory_efficient_attention_layer PUBLIC fmha_fwd_op)

add_library(fuse_multi_head_attention_layer STATIC fuse_multi_head_attention_layer.cc)
set_property(TARGET fuse_multi_head_attention_layer PROPERTY POSITION_INDEPENDENT_CODE  ON)
target_link_libraries(fuse_multi_head_attention_layer PUBLIC memory_efficient_attention_layer linear_layer layer_norm_layer)

add_library(memory_efficient_attention_decoder_layer STATIC memory_efficient_attention_decoder_layer.cc)
set_property(TARGET memory_efficient_attention_decoder_layer PROPERTY POSITION_INDEPENDENT_CODE  ON)
target_link_libraries(memory_efficient_attention_decoder_layer PUBLIC fmha_fwd_appendkv_op fmha_fwd_splitkv_op fmha_fwd_splitkv_combine_op)