cmake_minimum_required(VERSION 3.8)

add_library(fmha_common_kernel STATIC fmha_common_kernel.cc)
set_property(TARGET fmha_common_kernel PROPERTY POSITION_INDEPENDENT_CODE  ON)
target_link_libraries(fmha_common_kernel PUBLIC kernel_factory lightinfer_profiler log flags)

add_library(fmha_fwd_kernel STATIC fmha_fwd_kernel.cc)
set_property(TARGET fmha_fwd_kernel PROPERTY POSITION_INDEPENDENT_CODE  ON)
target_link_libraries(fmha_fwd_kernel PUBLIC fmha_common_kernel)

add_library(fmha_fwd_splitkv_kernel STATIC fmha_fwd_splitkv_kernel.cc)
set_property(TARGET fmha_fwd_splitkv_kernel PROPERTY POSITION_INDEPENDENT_CODE  ON)
target_link_libraries(fmha_fwd_splitkv_kernel PUBLIC fmha_common_kernel)

add_library(fmha_fwd_splitkv_combine_kernel STATIC fmha_fwd_splitkv_combine_kernel.cc)
set_property(TARGET fmha_fwd_splitkv_combine_kernel PROPERTY POSITION_INDEPENDENT_CODE  ON)
target_link_libraries(fmha_fwd_splitkv_combine_kernel PUBLIC fmha_common_kernel)

add_library(fmha_fwd_appendkv_kernel STATIC fmha_fwd_appendkv_kernel.cc)
set_property(TARGET fmha_fwd_appendkv_kernel PROPERTY POSITION_INDEPENDENT_CODE  ON)
target_link_libraries(fmha_fwd_appendkv_kernel PUBLIC fmha_common_kernel)